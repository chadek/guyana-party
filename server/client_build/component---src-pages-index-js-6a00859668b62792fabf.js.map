{"version":3,"sources":["webpack:///./node_modules/@material-ui/icons/Add.js","webpack:///./node_modules/@material-ui/icons/Shuffle.js","webpack:///./node_modules/@material-ui/icons/GpsFixed.js","webpack:///./src/components/Home/MainMap.js","webpack:///./src/components/Home/ListItem.js","webpack:///./src/components/Home/index.js","webpack:///./src/pages/index.js"],"names":["_interopRequireDefault","Object","defineProperty","exports","value","_react","_default","createElement","d","MainMap","setMarkers","onMarkerClick","setActions","setLoading","useState","map","setMap","useEffect","newMap","Map","initMarkers","requestMarkers","actions","id","Wrapper","styled","div","props","theme","md","lg","sm","xs","React","memo","item","selected","className","to","slug","alt","name","src","photos","length","group","formatPlage","headerHeight","Home","markers","loading","current","setCurrent","mapActions","setMapActions","canUpdate","useRef","If","condition","window","data","isLoading","Button","endIcon","onClick","isDenied","toast","locate","size","variant","random","CircularProgress","marker","index","key","Fab","aria-label","color","navigate","title","Seo"],"mappings":"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","file":"component---src-pages-index-js-6a00859668b62792fabf.js","sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon[\"default\"])(_react[\"default\"].createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports[\"default\"] = _default;","\"use strict\";\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon[\"default\"])(_react[\"default\"].createElement(\"path\", {\n  d: \"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z\"\n}), 'Shuffle');\n\nexports[\"default\"] = _default;","\"use strict\";\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon[\"default\"])(_react[\"default\"].createElement(\"path\", {\n  d: \"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"\n}), 'GpsFixed');\n\nexports[\"default\"] = _default;","import React, { useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport Map from '../Map'\n\nimport { requestMarkers } from '../../lib/services/eventService'\n\nconst MainMap = ({ setMarkers, onMarkerClick, setActions, setLoading }) => {\n  const [map, setMap] = useState(null)\n\n  useEffect(() => {\n    if (!map) {\n      const newMap = new Map(true)\n      newMap.initMarkers({ requestMarkers, setMarkers, onMarkerClick, setLoading })\n      setActions(newMap.actions)\n      setMap(newMap)\n    }\n  }, [map, onMarkerClick, setActions, setLoading, setMarkers])\n\n  return <div id=\"map\" />\n}\n\nMainMap.propTypes = {\n  setMarkers: PropTypes.func,\n  onMarkerClick: PropTypes.func,\n  setActions: PropTypes.func,\n  setLoading: PropTypes.func\n}\n\nexport default MainMap\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { Image, Link } from '../addons'\nimport { formatPlage } from '../../lib/date'\n\nconst Wrapper = styled.div`\n  padding: 5px;\n  border: 1px solid rgb(239, 239, 239);\n  background-color: #fff;\n  &.selected {\n    box-shadow: 1px 1px 5px blue;\n  }\n  &:hover {\n    box-shadow: 1px 1px 5px grey;\n  }\n  a.grid {\n    grid-template-columns: auto 1fr;\n    grid-gap: 5px;\n    height: 82px;\n    img {\n      width: 82px;\n      height: 100%;\n    }\n    .content {\n      overflow: hidden;\n      padding: 5px;\n      h2,\n      h3 {\n        margin-top: inherit;\n        margin-bottom: 0.3rem;\n      }\n      h2 {\n        font-size: 1.2rem;\n      }\n      h3,\n      p {\n        font-size: 0.9rem;\n      }\n      p {\n        margin-bottom: 0;\n      }\n    }\n  }\n  @media (min-width: ${props => props.theme.md}) and (max-width: ${props => props.theme.lg}),\n    (max-height: ${props => props.theme.sm}) {\n    a.grid {\n      height: 75px;\n      img {\n        width: 75px;\n      }\n      .content {\n        h2 {\n          font-size: 1rem;\n        }\n        h3 {\n          font-size: 0.8rem;\n        }\n      }\n    }\n  }\n  @media (max-width: ${props => props.theme.xs}) {\n    a.grid {\n      height: 75px;\n      img {\n        width: 75px;\n      }\n    }\n  }\n`\n\nconst ListItem = ({ item, selected }) => (\n  <Wrapper className={selected ? 'selected' : ''}>\n    <Link className=\"grid\" to={`/event/${item.slug}`}>\n      <Image alt={item.name} className=\"cover\" src={item.photos.length > 0 ? item.photos[0] : ''} />\n      <div className=\"content\">\n        <h2 className=\"text-wrap\">{item.name}</h2>\n        <h3 className=\"text-wrap\">{item.group && item.group.name}</h3>\n        <p>{formatPlage(item)}</p>\n      </div>\n    </Link>\n  </Wrapper>\n)\n\nListItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  selected: PropTypes.bool\n}\n\nexport default React.memo(ListItem)\n","import React, { useEffect, useRef, useState } from 'react'\nimport { navigate } from 'gatsby'\nimport styled from 'styled-components'\nimport Button from '@material-ui/core/Button'\nimport Fab from '@material-ui/core/Fab'\nimport AddIcon from '@material-ui/icons/Add'\nimport GpsFixed from '@material-ui/icons/GpsFixed'\nimport Shuffle from '@material-ui/icons/Shuffle'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Map from './MainMap'\nimport If from '../addons/If'\nimport ListItem from './ListItem'\nimport { toast } from '../../lib/utils'\n\nconst Wrapper = styled.div`\n  height: calc(100vh - ${props => props.theme.headerHeight});\n  grid-template-columns: 67% auto;\n  #map-section {\n    padding: 5px;\n  }\n  #map-section #map {\n    height: 100%;\n  }\n  #list-section {\n    overflow: auto;\n    grid-auto-rows: max-content;\n    grid-gap: 0.5rem;\n    padding: 0 5px 5px;\n    background-color: #fff;\n    #actions {\n      position: fixed;\n      width: 100%;\n      background: #fff;\n      padding: 5px 0;\n      button:not(:first-of-type) {\n        margin-left: 5px;\n      }\n      .progress {\n        display: inline-flex;\n        vertical-align: middle;\n        margin-left: 0.5rem;\n        div {\n          width: 20px !important;\n          height: 20px !important;\n        }\n      }\n    }\n    #events {\n      grid-gap: 0.5rem;\n      margin-top: 2.5rem;\n    }\n    #add-btn {\n      padding: 10px;\n      position: absolute;\n      bottom: 0;\n      right: 0;\n    }\n  }\n  @media (max-width: ${props => props.theme.md}) {\n    grid-template-columns: auto;\n    grid-template-rows: auto 1fr;\n    #map-section {\n      padding-top: 0;\n      #map {\n        height: 50vh;\n      }\n    }\n    #list-section {\n      #add-btn {\n        padding: 5px 10px;\n        button {\n          width: 46px;\n          height: 46px;\n        }\n      }\n    }\n  }\n`\n\nfunction Home() {\n  const [markers, setMarkers] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [current, setCurrent] = useState('')\n  const [mapActions, setMapActions] = useState({})\n\n  const canUpdate = useRef(true)\n\n  useEffect(() => () => (canUpdate.current = false), [])\n\n  return (\n    <Wrapper className=\"grid\">\n      <section id=\"map-section\">\n        <If condition={typeof window !== 'undefined'}>\n          <Map\n            onMarkerClick={data => setCurrent(data.slug)}\n            setActions={setMapActions}\n            setLoading={isLoading => canUpdate.current && setLoading(isLoading)}\n            setMarkers={setMarkers}\n          />\n        </If>\n      </section>\n      <section className=\"grid\" id=\"list-section\">\n        <div id=\"actions\">\n          <Button\n            endIcon={<GpsFixed />}\n            onClick={() => {\n              if (mapActions.isDenied()) return toast('La localisation a été désactivée !')\n              mapActions.locate()\n            }}\n            size=\"small\"\n            variant=\"outlined\"\n          >\n            Autour de moi\n          </Button>\n          <Button endIcon={<Shuffle />} onClick={() => mapActions.random()} size=\"small\" variant=\"outlined\">\n            AléaTown\n          </Button>\n          {loading && (\n            <span className=\"progress\">\n              <CircularProgress />\n            </span>\n          )}\n        </div>\n        <div className=\"grid\" id=\"events\">\n          {markers &&\n            markers.map((marker, index) => (\n              <ListItem item={marker} key={marker.slug + index} selected={marker.slug === current} />\n            ))}\n        </div>\n        <div id=\"add-btn\">\n          <Fab\n            aria-label=\"Créer un évènement\"\n            color=\"primary\"\n            onClick={() => navigate('/app/event/new')}\n            title=\"Créer un évènement\"\n          >\n            <AddIcon />\n          </Fab>\n        </div>\n      </section>\n    </Wrapper>\n  )\n}\n\nexport default Home\n","import React from 'react'\nimport Seo from '../components/addons/Seo'\nimport Home from '../components/Home'\n\nconst index = () => (\n  <>\n    <Seo title=\"Liberté Humaine\" />\n    <Home />\n  </>\n)\n\nexport default index\n"],"sourceRoot":""}