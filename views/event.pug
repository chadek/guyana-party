extends layout

include mixins/_removeDialog
include mixins/_switchPublishEvent

block customStyle
  link(rel="stylesheet", href="/vendor/ol/ol.css")

block content
  .pure-g
    .pure-u-1.content
      if remove
        +removeDialog(event, "event")
      //- Flyer
      .pure-u-1.photo-orga-event
        img(src=(event.photo ? `/uploads/${event.photo}` : "/images/default.jpg") alt="Flyer de l'évènement")
      .separator.top-space
      //- Name
      .pure-u-1.top-space.text-center
        h2= event.name
      .pure-u-1.top-space.text-center
        //- Switches, Edit & Archive buttons
        if isOwner
          +switchPublishEvent(event)
          br
          a(href=`/events/${event.id}/edit` title="Modifier" style="margin-right: 10px;")
            span.icon!= h.icon("edit")
          a(href=`/event/${event.slug}?remove=true` title="Archiver")
            span.icon!= h.icon("archive")
        p Organisateur :
          a(href=`/organism/${orga.slug}`)= ` ${orga.name}`
      //- Date && Time
      .pure-u-1.l-wrap.top-space-40.text-center
        //- Start date && time
        .pure-u-1: label Début
        .pure-u-1.top-space
          .u-sm-5-12.l-content
            span.pure-u-1-8.icon!= h.icon("calendar")
            input.pure-u-7-8#startdate(type="text" readonly)
          .u-sm-5-12.l-content
            span.pure-u-1-8.icon!= h.icon("clock")
            input.pure-u-7-8#starttime(type="text" readonly)
        //- End date && time
        .pure-u-1.top-space: label Fin
        .pure-u-1.top-space
          .u-sm-5-12.l-content
            span.pure-u-1-8.icon!= h.icon("calendar")
            input.pure-u-7-8#enddate(type="text" readonly)
          .u-sm-5-12.l-content
            span.pure-u-1-8.icon!= h.icon("clock")
            input.pure-u-7-8#endtime(type="text" readonly)
          input#event-start(type="hidden" value=`${event.start}`)
          input#event-end(type="hidden" value=`${event.end}`)
        .pure-u-1.top-space.text-center
          .u-sm-1: label= `Fuseau horaire : ${event.timezone}`
      //- Description
      .pure-u-1.top-space-40
        label Description de l'évènement&nbsp;:
        #md.readonly.top-space #{event.description}
      //- Event location
      .pure-u-1.top-space-40
        label Le lieu de l'évènement :
        #map.single.readonly.top-space
        p.text-center= event.location.address
        input#longitude(type="hidden" value=(event.location && event.location.coordinates[0]))
        input#latitude(type="hidden" value=(event.location && event.location.coordinates[1]))
      unless remove
        .pure-u-1.top-space-40
          button.pure-button.success.button.expanded(onClick=`location="/events/${event._id}/edit"`) Modifier
